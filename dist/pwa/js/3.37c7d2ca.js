(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0565":function(t,n,e){"use strict";var a=e("1aee"),o=e.n(a);o.a},"1aee":function(t,n,e){},"8b24":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("Map",{ref:"map",style:t.mapHeight,attrs:{lat:37.563219,lng:126.973622,zoom:16}})],1)},o=[],r=e("8993"),i=e.n(r),s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"map",attrs:{id:"map"},on:{click:t.onClickMap}})},c=[],l=(e("ac6a"),e("ac4d"),e("8a81"),e("5df3"),e("1c4c"),e("6b54"),e("06db"),e("7f7f"),e("c5f6"),e("bc3a")),p=e.n(l);function u(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=h(t))){var n=0,e=function(){};return{s:e,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,r=!0,i=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return r=t.done,t},e:function(t){i=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(i)throw o}}}}function h(t,n){if(t){if("string"===typeof t)return d(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(t,n):void 0}}function d(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=new Array(n);e<n;e++)a[e]=t[e];return a}var m={name:"Map",props:{lat:Number,lng:Number,zoom:Number},data:function(){return{map:null,markers:[],regionData:{},regionGeoData:{features:{}}}},mounted:function(){var t=this;p.a.get("/statics/geodata/LAWDCD.json").then((function(n){var e,a=u(n.data);try{for(a.s();!(e=a.n()).done;){var o=e.value;t.regionData[o.LAWD_CD]=o}}catch(r){a.e(r)}finally{a.f()}})),p.a.get("/statics/geodata/REGIONS.json").then((function(n){t.regionGeoData=n.data})),this.setCenterToGeolocation(),this.drawMap(),window.naver.maps.Event.once(this.map,"init_stylemap",this.mapInit)},methods:{onClickMap:function(){this.$parent.$parent.$parent.topCardOpened=!this.$parent.$parent.$parent.topCardOpened},drawMap:function(){var t={center:new window.naver.maps.LatLng(this.lat,this.lng),zoom:this.zoom,zoomControl:!0,zoomControlOptions:{style:window.naver.maps.ZoomControlStyle.SMALL,position:window.naver.maps.Position.RIGHT_BOTTOM}};this.map=new window.naver.maps.Map("map",t)},mapInit:function(){var t='<a href="#" class="btn-location"><span class="ico-location">접속위치</span></a>',n=new window.naver.maps.CustomControl(t,{position:window.naver.maps.Position.RIGHT_BOTTOM});n.setMap(this.map),window.naver.maps.Event.addDOMListener(n.getElement(),"click",this.setCenterToGeolocation),n.getElement().parentNode.parentNode.className="control-wrapper"},updatePosition:function(t){var n=new window.naver.maps.LatLng(t.coords.latitude,t.coords.longitude);this.map.setCenter(n)},setCenterToGeolocation:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this.updatePosition)},showMarker:function(t,n,e){var a=new window.naver.maps.LatLng(n,e),o=new window.naver.maps.Marker({map:this.map,position:a,icon:{content:['<img class="image-marker" src="/statics/images/marker.png"/>','<div class="label-marker">'.concat(t,"</div>")].join(""),size:new window.naver.maps.Size(20,20)}});this.markers.push(o)},onShopDataResponse:function(t){var n=this,e=this.map.getCenter().lng(),a=this.map.getCenter().lat(),o=[],r="";if(t.data.length>0){var i,s=u(t.data);try{for(s.s();!(i=s.n()).done;){var c=i.value;o.push(c.shop_name),r+=c.shop_address+"|"}}catch(l){s.e(l)}finally{s.f()}r=r.substr(0,r.length-1),p.a.get("http://devx.kr:9991/geocode",{params:{address:r,coordinate:e+","+a}}).then((function(t){var e,a=0,r=u(t.data);try{for(r.s();!(e=r.n()).done;){var i=e.value,s=i.addresses;"undefined"!==typeof s&&s.length>0&&n.showMarker(o[a++],s[0].y,s[0].x)}}catch(l){r.e(l)}finally{r.f()}}))}},showMarkersByQuery:function(t,n){this.removeMarkers();var e,a=this.getCurrentRegions(),o=u(a);try{for(o.s();!(e=o.n()).done;){var r=e.value;p.a.get("http://devx.kr:9991/zeropay",{params:{sido:r.SIDO_CD,sigungu:r.SIGUNGU_CD,name:t,type:n}}).then(this.onShopDataResponse)}}catch(i){o.e(i)}finally{o.f()}},showMarkersByType:function(t){this.removeMarkers();var n,e=this.getCurrentRegions(),a=u(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;p.a.get("http://devx.kr:9991/zeropay",{params:{sido:o.SIDO_CD,sigungu:o.SIGUNGU_CD,type:t}}).then(this.onShopDataResponse)}}catch(r){a.e(r)}finally{a.f()}},removeMarkers:function(){var t,n=u(this.markers);try{for(n.s();!(t=n.n()).done;){var e=t.value;e.setMap(null)}}catch(a){n.e(a)}finally{n.f()}this.markers=[]},getCurrentRegions:function(){var t,n=this.map.getCenter().lng(),e=this.map.getCenter().lat(),a=this.map.getBounds()._max._lng,o=this.map.getBounds()._max._lat,r=this.getWGSDistance(e,n,o,a),i=[],s=u(this.regionGeoData);try{for(s.s();!(t=s.n()).done;){var c=t.value;this.getWGSDistance(e,n,c.lat,c.lng)<=c.radius+r&&(console.log(c.name),i.push(this.regionData[c.code]))}}catch(l){s.e(l)}finally{s.f()}return i},getWGSDistance:function(t,n,e,a){function o(t){return t*Math.PI/180}var r=6371,i=o(e-t),s=o(a-n),c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(o(t))*Math.cos(o(e))*Math.sin(s/2)*Math.sin(s/2),l=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),p=r*l;return p}}},f=m,g=e("2877"),v=Object(g["a"])(f,s,c,!1,null,null,null),w=v.exports,y={name:"PageIndex",components:{Map:w},data:function(){return{mapHeight:"height: 100vh;"}},mounted:function(){this.checkStyle()},methods:{checkStyle:function(){var t=this,n=function n(){"object"===i()(t.$parent.$parent.iPhoneIndicatorCheck)?setTimeout((function(){n()}),50):t.$parent.$parent.iPhoneIndicatorCheck&&(t.mapHeight="height: calc(100vh - 22px);")};n()}}},M=y,C=(e("0565"),Object(g["a"])(M,a,o,!1,null,null,null));n["default"]=C.exports}}]);