(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0565":function(t,e,n){"use strict";var a=n("1aee"),o=n.n(a);o.a},"1aee":function(t,e,n){},"8b24":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Map",{ref:"map",style:t.mapHeight,attrs:{lat:37.563219,lng:126.973622,zoom:16}})],1)},o=[],r=n("7037"),i=n.n(r),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map",attrs:{id:"map"},on:{click:t.onClickMap}})},c=[],p=(n("ac6a"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("06db"),n("c5f6"),n("bc3a")),l=n.n(p),u=n("6cb4"),m=n.n(u);function h(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=d(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,r=!0,i=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return r=t.done,t},e:function(t){i=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(i)throw o}}}}function d(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var v={name:"Map",props:{lat:Number,lng:Number,zoom:Number},data:function(){return{map:null,markers:[],regionData:{},regionGeoData:{features:{}}}},mounted:function(){var t=this;l.a.get("/statics/geodata/LAWDCD.json").then((function(e){var n,a=h(e.data);try{for(a.s();!(n=a.n()).done;){var o=n.value;t.regionData[o.LAWD_CD]=o}}catch(r){a.e(r)}finally{a.f()}})),l.a.get("/statics/geodata/TL_SCCO_SIG.json").then((function(e){t.regionGeoData=e.data})),this.setCenterToGeolocation(),this.drawMap(),window.naver.maps.Event.once(this.map,"init_stylemap",this.mapInit)},methods:{onClickMap:function(){this.$parent.$parent.$parent.topCardOpened=!this.$parent.$parent.$parent.topCardOpened},drawMap:function(){var t={center:new window.naver.maps.LatLng(this.lat,this.lng),zoom:this.zoom,zoomControl:!0,zoomControlOptions:{style:window.naver.maps.ZoomControlStyle.SMALL,position:window.naver.maps.Position.RIGHT_BOTTOM}};this.map=new window.naver.maps.Map("map",t)},mapInit:function(){var t='<a href="#" class="btn-location"><span class="ico-location">접속위치</span></a>',e=new window.naver.maps.CustomControl(t,{position:window.naver.maps.Position.RIGHT_BOTTOM});e.setMap(this.map),window.naver.maps.Event.addDOMListener(e.getElement(),"click",this.setCenterToGeolocation),e.getElement().parentNode.parentNode.className="control-wrapper"},updatePosition:function(t){var e=new window.naver.maps.LatLng(t.coords.latitude,t.coords.longitude);this.map.setCenter(e)},setCenterToGeolocation:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this.updatePosition)},showMarker:function(t,e,n){var a=new window.naver.maps.LatLng(e,n),o=new window.naver.maps.Marker({map:this.map,position:a,icon:{content:['<img class="image-marker" src="/statics/images/marker.png"/>','<div class="label-marker">'.concat(t,"</div>")].join(""),size:new window.naver.maps.Size(20,20)}});this.markers.push(o)},onShopDataResponse:function(t){var e,n=this,a=this.map.getCenter().lng(),o=this.map.getCenter().lat(),r=[],i="",s=h(t.data);try{for(s.s();!(e=s.n()).done;){var c=e.value;r.push(c.shop_name),i+=c.shop_address+"|"}}catch(p){s.e(p)}finally{s.f()}i=i.substr(0,i.length-1),l.a.get("http://devx.kr:9991/geocode",{params:{address:i,coordinate:a+","+o}}).then((function(t){var e,a=0,o=h(t.data);try{for(o.s();!(e=o.n()).done;){var i=e.value,s=i.addresses;"undefined"!==typeof s&&s.length>0&&n.showMarker(r[a++],s[0].y,s[0].x)}}catch(p){o.e(p)}finally{o.f()}}))},showMarkersByQuery:function(t,e){this.removeMarkers();var n,a=this.getCurrentRegions(),o=h(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;l.a.get("http://devx.kr:9991/zeropay",{params:{sido:r.SIDO_CD,sigungu:r.SIGUNGU_CD,name:t,type:e}}).then(this.onShopDataResponse)}}catch(i){o.e(i)}finally{o.f()}},showMarkersByType:function(t){this.removeMarkers();var e,n=this.getCurrentRegions(),a=h(n);try{for(a.s();!(e=a.n()).done;){var o=e.value;l.a.get("http://devx.kr:9991/zeropay",{params:{sido:o.SIDO_CD,sigungu:o.SIGUNGU_CD,type:t}}).then(this.onShopDataResponse)}}catch(r){a.e(r)}finally{a.f()}},removeMarkers:function(){var t,e=h(this.markers);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.setMap(null)}}catch(a){e.e(a)}finally{e.f()}this.markers=[]},getCurrentRegions:function(){var t,e,n=this.map.getBounds(),a={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[n._min.x,n._min.y],[n._max.x,n._min.y],[n._max.x,n._max.y],[n._min.x,n._max.y]]]}},o=[],r=h(this.regionGeoData.features);try{for(r.s();!(e=r.n()).done;){var i=e.value;t=m()(a,i),null!==t&&(console.log(i.properties.SIG_KOR_NM),o.push(this.regionData[i.properties.SIG_CD]))}}catch(s){r.e(s)}finally{r.f()}return o}}},g=v,y=n("2877"),w=Object(y["a"])(g,s,c,!1,null,null,null),C=w.exports,k={name:"PageIndex",components:{Map:C},data:function(){return{mapHeight:"height: 100vh;"}},mounted:function(){this.checkStyle()},methods:{checkStyle:function(){var t=this,e=function e(){"object"===i()(t.$parent.$parent.iPhoneIndicatorCheck)?setTimeout((function(){e()}),50):t.$parent.$parent.iPhoneIndicatorCheck&&(t.mapHeight="height: calc(100vh - 22px);")};e()}}},_=k,b=(n("0565"),Object(y["a"])(_,a,o,!1,null,null,null));e["default"]=b.exports}}]);